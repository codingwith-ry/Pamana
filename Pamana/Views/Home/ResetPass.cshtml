@{
    Layout = "~/Views/Shared/_LoginLayout.cshtml";
}

<div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-image: url('/Content/login_background.png'); background-size: cover; background-position: center; background-repeat: no-repeat;">
    <div style="display: flex; justify-content: center; align-items: center; flex-direction: column; height: 90%;">
        <!-- Logo -->
        <div style="margin-bottom: 20px;">
            <img src="~/Content/PAMANA Logo.png" alt="Logo" style="width: 420px; height: auto;">
        </div>
        <!-- Card -->
        <div class="card" style="width: 400px; border-radius: 10px; background: rgba(255, 255, 255, 0.9); box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);">
            <div class="card-content" style="padding: 30px;">
                <span class="card-title center-align" style="font-weight: bold; font-size: 24px; color: #C30000;">Reset Password</span>
                <p class="center-align" style="color: #757575;">Enter a new password below to change your password.</p>
                <div class="row">
                    <!-- New Password Field -->
                    <div class="input-field">
                        <input id="new-password" type="password" class="validate" required>
                        <label for="new-password">New Password</label>
                    </div>
                    <!-- Confirm New Password Field -->
                    <div class="input-field">
                        <input id="confirm-password" type="password" class="validate" required>
                        <label for="confirm-password">Confirm New Password</label>
                    </div>
                </div>
            </div>
            <div class="card-action center-align">
                <button type="submit" class="btn waves-effect waves-light" id="reset-password" style="background-color: #C30000; width: 100%; border-radius: 5px;">Reset Password</button>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Reset Password Handler
        document.getElementById('reset-password').addEventListener('click', function () {
            const newPassword = document.getElementById('new-password').value;
            const confirmPassword = document.getElementById('confirm-password').value;

            if (!newPassword || !confirmPassword) {
                M.toast({ html: 'Please fill out all password fields!' });
                return;
            }

            if (newPassword !== confirmPassword) {
                M.toast({ html: 'Passwords do not match!' });
                return;
            }

            // Simulate an API call to validate OTP and reset the password
            M.toast({ html: 'Password reset successful!' });
            setTimeout(() => {
                // Redirect to login page
                window.location.href = '@Url.Action("Login", "Home")';
            }, 2000); // Delay to let the user see the toast
        });
    });
</script>
